# FlashSYNC API文档
> 严格意义上并不是一个软件，更偏向于一个通信协议，用来协商包括WS2812在内的一些的可寻址RGB灯条通过转接芯片实现和上位机通信的一种通信协议。


>目前 FlashSYNC正处于0.1内部测试版本，所用协议并没有完全定性，甚至某些API尚未实现，请各位基于此开发时请勿使用硬编码
***

### 默认参数
> 测试芯片：<kbd>ESP32-PICO-D4</kbd>@<kbd>ESP32-PCIO-KIT</kbd>

> 开发环境:<kbd>Clion @2021.3</kbd> +<kbd>PlatformIO</kbd> 

> 开发框架：<kbd>Arduino</kbd>

> 开发库：<kbd>Adafruit NeoPixel@^1.10.1</kbd>

> 串波特率：<kbd>115200</kbd>

> 默认输出引脚（控制彩灯的引脚）:<kbd>IO4</kbd>


### 通信协议
> 每个彩灯由3个字节控制（R,G,B）【为节省资源、降低开发难度,每通道取值为0-200，WS2812支持0-255，
> 后续将会通过修改协议实现0-253甚至完全版本的0-255】
每个彩灯可支持200x200x200=8,000,000颜色无需担心颜色不够丰富  


>彩灯分为数据帧和指令帧，其中数据帧为0-200，指令帧分为单字节指令、多字节指令其中单字节指令一旦发送，
> 会被系统自动执行，多字节指令在发送完第一个指令后必须发送后续指令，或者取消指令退出，否则一切不符合规范的指令都会被忽略
> 并且系统不会继续执行接下来的指令，直至正确的指令或者正确的指令。

#### 单字节指令:
> <kbd>ENTER</kbd>--<kbd>0xFF</kbd> 确认指令一旦系统接收到此指令，系统将立刻使用缓冲区数据刷新彩灯颜色
 
> <kbd>CLEAR</kbd>--<kbd>0xFE</kbd>清空指令，一旦系统接收到此指令会立刻清空所有灯的颜色（关闭所有灯）

> <kbd>CONNECT</kbd>--<kbd>0xFC</kbd>连接指令，用于和上位机互相建立连接，当上位机向系统发送0xFC指令时，若系统已经复位，
> 则会返回0xFC并等待接受系统其他指令，若未复位则会复位并等待连接（所以连接指令需要多次发送）


